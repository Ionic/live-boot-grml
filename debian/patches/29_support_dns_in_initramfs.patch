commit 10caf0b2db3fc04fae24ca896cf21f6aed12bbbc
Author: Christian Hofstaedtler <ch@grml.org>
Date:   Fri Mar 25 23:02:38 2011 +0100

    support DNS in boot environment
    
    Thanks to Ulrich Dangel for discovering this. [Closes: issue848]

diff --git a/hooks/live b/hooks/live
index 309c26f..3862a60 100755
--- a/hooks/live
+++ b/hooks/live
@@ -252,17 +252,14 @@ then
 	manual_add_modules crc32c
 fi
 
-if [ "${LIVE_DNS}" = "true" ]
-then
-	[ "${QUIET}" ] || echo -n " "dns
-	#copy_exec /lib/libnss_files.so.*      /lib  # /etc/hosts and /etc/passwd
-	copy_exec /lib/libnss_dns.so.*      /lib  # DNS server
-	#copy_exec /lib/libnss_compat.so.*      /lib  # /etc/passwd
-
-	# Configuration file - may be needed if /etc/hosts is used.
-	#mkdir -p $DESTDIR/etc
-	#cp -p /etc/nsswitch.conf $DESTDIR/etc
-fi
+# DNS for initramfs
+#copy_exec /lib/libnss_files.so.*      /lib  # /etc/hosts and /etc/passwd
+copy_exec /lib/libnss_dns.so.*      /lib  # DNS server
+#copy_exec /lib/libnss_compat.so.*      /lib  # /etc/passwd
+
+# Configuration file - may be needed if /etc/hosts is used.
+#mkdir -p $DESTDIR/etc
+#cp -p /etc/nsswitch.conf $DESTDIR/etc
 
 if [ "${LIVE_UNIONMOUNT}" = "true" ]
 then
