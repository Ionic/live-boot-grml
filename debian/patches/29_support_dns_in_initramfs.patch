commit 10caf0b2db3fc04fae24ca896cf21f6aed12bbbc
Author: Christian Hofstaedtler <ch@grml.org>
Date:   Fri Mar 25 23:02:38 2011 +0100

    support DNS in boot environment
    
    Thanks to Ulrich Dangel for discovering this. [Closes: issue848]

Index: live-boot-grml/hooks/live
===================================================================
--- live-boot-grml.orig/hooks/live	2011-12-06 22:10:17.000000000 +0100
+++ live-boot-grml/hooks/live	2011-12-06 22:10:47.000000000 +0100
@@ -266,17 +266,14 @@
 	manual_add_modules crc32c
 fi
 
-if [ "${LIVE_DNS}" = "true" ]
-then
-	[ "${QUIET}" ] || echo -n " "dns
-	#copy_exec /lib/libnss_files.so.*      /lib  # /etc/hosts and /etc/passwd
-	copy_exec /lib/libnss_dns.so.*      /lib  # DNS server
-	#copy_exec /lib/libnss_compat.so.*      /lib  # /etc/passwd
+# DNS for initramfs
+#copy_exec /lib/libnss_files.so.*      /lib  # /etc/hosts and /etc/passwd
+copy_exec /lib/libnss_dns.so.*      /lib  # DNS server
+#copy_exec /lib/libnss_compat.so.*      /lib  # /etc/passwd
 
-	# Configuration file - may be needed if /etc/hosts is used.
-	#mkdir -p $DESTDIR/etc
-	#cp -p /etc/nsswitch.conf $DESTDIR/etc
-fi
+# Configuration file - may be needed if /etc/hosts is used.
+#mkdir -p $DESTDIR/etc
+#cp -p /etc/nsswitch.conf $DESTDIR/etc
 
 if [ "${LIVE_UNIONMOUNT}" = "true" ]
 then
