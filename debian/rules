#!/usr/bin/make -f

%:
	dh ${@} --parallel

override_dh_auto_install:
	dh_auto_install -- DESTDIR=debian/tmp

	# Removing useless files
	rm -f debian/tmp/usr/share/doc/live-boot-grml/COPYING
	rm -f debian/lib/live/boot/FIXME

	# live-boot-initramfs-tools
	mkdir -p debian/live-boot-grml-initramfs-tools/usr/share
	mv debian/tmp/usr/share/initramfs-tools debian/live-boot-grml-initramfs-tools/usr/share

	# this is needed because dpatch doesn't do file modes on diffs
	# and we can't execute this fix during build stage as new files
	# might be installed during dh_quilt_patch
	chmod a+rx debian/live-boot-grml-initramfs-tools/usr/share/initramfs-tools/scripts/*
	chmod a+rx debian/live-boot-grml-initramfs-tools/usr/share/initramfs-tools/hooks/*

override_dh_install:
	dh_install --fail-missing
